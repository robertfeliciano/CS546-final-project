<!-- FILEPATH: /Users/sabahnaveed/CS546/final-repo/CS546-final-project/views/music/musicPiece.handlebars -->

<div class="middle">
    <div class="reg">
        <h3>
            Name: {{name}}
        </h3>
        <h3>
            Artist: {{artist}}
        </h3>
        <h3>
            Rating: {{total_stars}}
        </h3>
        <h3>
            Genre: {{genre}}
        </h3>

        <ul>
            {{#each posts}}
                <!--TODO: fix-->
                <li>
                    <a href="/posts/{{_id}}">
                        {{title}}
                    </a>
                </li>
            {{/each}}
        </ul>
    </div>
    
    <div class="make-post">
        <form action="/music/{{id}}" method="POST">
            <label for="content">
                Content:
            </label>
            <textarea name="content" id="content" placeholder="What's on your mind?">{{post.contents}}</textarea>
            <input type="hidden" name="piece_id" value="{{_id}}">
            <label for="rating">
                Rating:
            </label>
            <input type="number" name="rating" id="rating" min="1" max="5" value="1">
            <button type="submit">Post</button>
        </form>
    </div>
</div>


<!--  
<script>
    $.ajax({
        url: '/posts',
        type: 'GET',
        success: function (data) {
            console.log(data);
            var posts = data.posts;
            var list = $('ul');
            for (var i = 0; i < posts.length; i++) {
                var post = posts[i];
                var listItem = $('<li></li>');
                var link = $('<a></a>');
                link.attr('href', '/posts/' + post._id);
                link.text(post.title);
                listItem.append(link);
                list.append(listItem);
            }
        }
    });
</script>
-->